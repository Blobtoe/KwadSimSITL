set(GDSCRIPT_SOURCE "${CMAKE_CURRENT_SOURCE_DIR}/Packets.gd")
set(GDSCRIPT_OUTPUT "${CMAKE_CURRENT_BINARY_DIR}/Packets.gd")

add_custom_command(OUTPUT ${GDSCRIPT_OUTPUT}
  COMMAND cpp -o ${GDSCRIPT_OUTPUT} ${GDSCRIPT_SOURCE}
  WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
  DEPENDS ${GDSCRIPT_SOURCE}
  COMMENT "Generating Packets.gd"
  VERBATIM
)

add_custom_target(gdscript DEPENDS ${GDSCRIPT_OUTPUT})